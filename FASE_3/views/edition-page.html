<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="/faviconVVISUAL.png">
    <script src="/app.js"></script>
    <link rel="stylesheet" href="/style.css">
    <title>Vanguardismo Visual</title>
</head>
<body>
    {{>header}}

    <section class="aspecto-principal">
        <div class="new-cuadro">
            <h1>Editar Cuadro</h1>
    
            <form method="POST" id="creationForm" enctype="multipart/form-data" class="needs-validation" onsubmit="sendFormEdit(event)" novalidate>
                <div class="mb-3">
                    <label for="artName" id="inputArtName" class="form-label" value="{{cuadro.id}}">Título de la obra</label><br>
                    <input type="text" class="form-control" id="artName" oninput="checkPaintingTitleEdit()" name="title" value="{{cuadro.title}}" required>
                    <div class="invalid-feedback" id="upperCaseFeedback">El título debe empezar con mayúscula</div>
                    <div class="invalid-feedback" id="repeatedTitle">El título ya está en uso</div>
                    <div class="invalid-feedback" id="emptyFeedback">El título no puede estar vacío</div>
                    <div class="valid-feedback" id="validTitle">Título disponible</div>
                </div>

                <div class="mb-3">
                    <label for="painter-Name" >Autor de la obra</label><br>
                    <input type="text" class="form-control" id="painter-Name" name="author" value="{{cuadro.author}}" required maxlength="35" />
                    <div class="invalid-feedback" id="painterNameFeedback">Nombre del autor no puede estar vacío</div>
                </div>

                <div class="mb-3">
                    <label for="style">Período de la obra</label><br>
                    <input type="text" class="form-control" id="period" name="style" value="{{cuadro.style}}" required maxlength="20" />
                    <div class="invalid-feedback" id="periodFeedback">El período no puede estar vacío</div>
                </div>

                <div class="mb-3">
                    <label for="price">Precio de la obra</label><br>
                    <input type="number" class="form-control" id="price" name="price" value="{{cuadro.price}}" oninput="checkPrice()" min="0" required />
                    <div class="invalid-feedback" id="monetaryValueFeedback">El precio de la obra no puede estar vacío</div>
                    <div id="minusceroFeedback" class="invalid-feedback">El precio no puede ser inferior a 0</div>
                    <div id="validPrice" class="valid-feedback">Precio válido</div>
                </div>

                <div class="mb-3">
                    <label for="description">Descripción de la obra</label><br>
                    <textarea id="description" class="form-control"  name="description" rows="6" oninput="checkDescription()" required>{{cuadro.description}}</textarea>
                    <div class="invalid-feedback" id="descriptionFeedback">La descripción no puede estar vacía</div>
                    <div id="shortDescriptionFeedback" class="invalid-feedback">La descripción debe tener al menos 10 caracteres</div>
                    <div id="longDescriptionFeedback" class="invalid-feedback">La descripción no puede tener más de 900 caracteres</div>
                    <div id="validDescription" class="valid-feedback">Descripción válida</div>                
                </div>

                <div class="mb-3">
                    <label for="opinion">Opinión del autor</label><br>
                    <textarea id="painter-opinion" class="form-control"  name="opinion" rows="6" required>{{cuadro.opinion}}</textarea>
                    <div class="invalid-feedback" id="opinionFeedback">La opinión del autor no puede estar vacía</div>
                </div>
                
                <div class="mb-3">
                    <label for="date">Fecha del cuadro</label><br>
                    <input type="date" id="date" class="form-control" name="date" oninput="checkDate()" value="{{cuadro.date}}" required /> <!--añadir fecha máxima (hoy) con script posteriormente-->
                    <div class="invalid-feedback" id="dateFeedback">La fecha no puede estar vacía</div>
                    <div id="futureDateFeedback" class="invalid-feedback">La fecha debe ser anterior a la fecha de hoy</div>
                    <div id="validDate" class="valid-feedback">Fecha válida</div>
                </div>

                <div class="mb-3">
                    <label for="image">Cuadro actual</label><br>
                    <img src="/cuadro/{{cuadro.id}}/image" alt="imagen-{{cuadro.id}}" width="200">
                </div>
    
                <div class="mb-3">
                    <label for="image">Cambiar Imagen (opcional)</label><br>
                    <input type="file" id="file-foto" class="form-control" name="image"> <!--añadir fecha máxima (hoy) con script posteriormente-->
                    <div class="invalid-feedback" id="imageFeedback">Por favor, añade la imagen del cuadro</div>
                </div>

                <div class="mb-3">
                    <button type="button" class="btn btn-danger btn-lg" onclick="location.href='/'">Cancelar</button>
                    <button type="submit" value="save" class="btn btn-primary btn-lg">Guardar Cambios</button>
                </div>
            </form>
        </div>
    </section>
    
    {{> footer}}
    
    </body>
    </html>